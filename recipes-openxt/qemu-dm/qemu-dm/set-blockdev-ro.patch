--- a/blockdev.c
+++ b/blockdev.c
@@ -2571,6 +2571,7 @@ void qmp_blockdev_change_medium(const ch
 
     switch (read_only) {
     case BLOCKDEV_CHANGE_READ_ONLY_MODE_RETAIN:
+        bdrv_flags &= ~BDRV_O_RDWR;
         break;
 
     case BLOCKDEV_CHANGE_READ_ONLY_MODE_READ_ONLY:
